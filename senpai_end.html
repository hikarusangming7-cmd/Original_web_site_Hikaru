<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>先輩とハッピーエンド</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Yuji+Boku&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="./assets/css/reset.css" />
  <link rel="stylesheet" href="./assets/css/senpai_end.css" />
</head>

<body class="senpai_end">
  <div class="imge" aria-hidden="true"></div>

  <!-- タイトル：1行目=左寄せ / 最終行=右寄せ（星はテキストの一部） -->
 <h1 class="ending-title ending-title--brush ending-title--grime" aria-label="Happy Ending">
  <span class="title-line">★ Happy Ending ★</span>
</h1>
  <!-- ボタン（トップへ） -->
  <div class="button-container">
    <a href="index.html" class="link-button" aria-label="トップページへ戻る">トップページ</a>
  </div>

  <!-- インクにじみ（SVGフィルタ）ページ内に1回だけ -->
  <svg width="0" height="0" aria-hidden="true" focusable="false">
    <defs>
      <filter id="ink-bleed" x="-20%" y="-20%" width="140%" height="140%">
        <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" seed="7" result="noise"/>
        <feColorMatrix type="saturate" values="0" in="noise" result="mono"/>
        <feGaussianBlur stdDeviation="0.55" in="mono" result="soft"/>
        <feDisplacementMap in="SourceGraphic" in2="soft" scale="1.6" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </defs>
  </svg>
<script>
(() => {
  const line = document.querySelector('.title-line');
  if (!line) return;

  // 元テキストを「単語と空白」に分解（空白はそのまま残す）
  const tokens = line.textContent.split(/(\s+)/); // 空白を保持して分割
  const html = tokens.map(tok => {
    if (/^\s+$/.test(tok) || tok === '') {
      // 空白はそのまま（改行はここだけで起きる）
      return tok;
    }
    // 単語（★ も含む）はグループ化し、その中だけ1文字ずつ包む
    const chars = Array.from(tok)
      .map((ch, i) => `<span class="ch" style="--i:${i}">${ch}</span>`)
      .join('');
    return chars;
  }).join('');

  line.innerHTML = html;
})();
</script>

</body>
</html>
