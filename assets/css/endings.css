:root{
  --bg:#0b0b0b; --card:#151515; --ink:#e6dcc7; --muted:#9c9488;
  --accent:#ffe39a; --accent-ink:#3c352a; --ring:#fff7c9;
}
* { box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family: Inter, system-ui, -apple-system, "Noto Serif JP", serif;
}

/* ヘッダ＆コントロール */
.wrap{ max-width:1100px; margin:0 auto; padding:24px 16px 48px; }
header{ display:flex; flex-wrap:wrap; gap:12px 16px; align-items:center; justify-content:space-between; margin-bottom:16px;}
.title{ font-weight:700; letter-spacing:.02em; }
.controls{ display:flex; gap:10px; flex-wrap:wrap; }
.input, .select, .toggle{
  background:#1b1b1b; color:var(--ink); border:1px solid #2a2a2a; border-radius:10px;
  padding:10px 12px; font-size:14px;
}
.input{ min-width:220px; }
.select{ min-width:140px; }
.toggle{ display:flex; align-items:center; gap:8px; cursor:pointer; user-select:none; }
.toggle input{ accent-color:#f5e3a4; }

/* グリッド */
.grid{ display:grid; grid-template-columns: repeat( auto-fill, minmax(220px,1fr) ); gap:14px; margin-top:18px; list-style:none; padding:0;}
.card{
  position:relative; border:1px solid #2a2a2a; border-radius:16px; background:var(--card);
  overflow:hidden; text-decoration:none; color:inherit; outline:none;
  transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.card:focus-visible{ box-shadow:0 0 0 3px var(--ring); }
.card:hover{ transform: translateY(-2px); }

/* サムネイル */
.thumb{
  position:relative; padding-top:58%;
  background:#0f0f0f center/cover no-repeat;
}
/* JSでインラインstyleの --thumb-url を反映する */
.thumb[data-img]{ background-image:var(--thumb-url); }

.badge{
  position:absolute; top:10px; left:10px; padding:6px 10px; border-radius:999px;
  background:var(--accent); color:var(--accent-ink); font-weight:700; font-size:12px; letter-spacing:.06em;
}

.info{ padding:12px 12px 14px; }
.name{ font-weight:700; line-height:1.35; }
.tags{ margin-top:6px; display:flex; flex-wrap:wrap; gap:6px; }
.tag{ font-size:11px; color:#c1b9ab; border:1px solid #3a342b; border-radius:999px; padding:4px 8px; letter-spacing:.05em; }

/* ネタバレ防止（トグルで全カードに適用） */
.spoiled .name{ filter:none; }
.needs-unblur .name{ filter: blur(6px); }
.needs-unblur .thumb{ filter: blur(4px) grayscale(.25); }

/* モーション配慮 */
@media (prefers-reduced-motion: reduce){
  .card{ transition:none; }
}

/* 小さめ端末 */
@media (max-width:480px){
  .input{ min-width:0; flex:1; }
  .select{ min-width:0; }
}
